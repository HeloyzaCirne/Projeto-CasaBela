<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Minha Conta - Meus Pedidos</title>
        <link rel="stylesheet" href="/css/usuario.css">
        <script src="https://unpkg.com/lucide@latest"></script>
        <script src="/js/usuario.js" defer></script>
    </head>
    <body>
        <header>
            <form action="/" method="get">
                <button class="icon-btn">
                    <i data-lucide="arrow-left" size="24"></i>
                </button>
            </form>
            <h1>Minha Conta</h1>
            <button class="icon-btn" style="visibility: hidden;">
                <i data-lucide="sparkles" size="20"></i>
            </button>
        </header>

        <section class="profile-section">
            <div class="avatar">
                <i data-lucide="user" size="32"></i>
            </div>
            <% if (usuario) { %>
                <div class="profile-info">
                    <h2><%= usuario.nome %></h2>
                    <p><%= usuario.email %></p>
                    <a href="/usuario/logout" class="subtitle">Sair</a>
                </div>
            <% } else { %>
                <div class="profile-info">
                    <h2>Bem-vindo!</h2>
                    <p>Faça login ou cadastre-se para continuar.</p>
                </div>
            <% } %>
        </section>

        <nav class="tabs">
            <button class="tab-btn" id="tab-history">Histórico</button>
            <button class="tab-btn" id="tab-login">Entrar/Cadastrar</button>
            <% if (usuario) { %>
                <button class="tab-btn" id="tab-update">Editar</button>
            <% } %>
        </nav>

        <main class="user-container" style="display: none;">
            <form class="login-container" action="/usuario/login" method="post">
                <div class="section-header">
                    <h1>Entrar</h1>
                </div>
                <div class="search-bar">
                    <i data-lucide="at-sign" color="#999" size="20"></i>
                    <input
                        type="text"
                        placeholder="Email"
                        name="email"
                    />
                </div>
                <div class="search-bar">
                    <i data-lucide="hash" color="#999" size="20"></i>
                    <input
                        type="password"
                        placeholder="Senha"
                        name="senha"
                    />
                </div>
                <button class="btn-login">Entrar</button>
            </form>
            <form class="login-container" action="/usuario/create" method="post">
                <div class="section-header">
                    <h1>Cadastrar</h1>
                </div>
                <div class="search-bar">
                    <i data-lucide="smile" color="#999" size="20"></i>
                    <input
                        type="text"
                        placeholder="Nome de usuário"
                        name="nome"
                    />
                </div>
                <div class="search-bar">
                    <i data-lucide="at-sign" color="#999" size="20"></i>
                    <input
                        type="text"
                        placeholder="Email"
                        name="email"
                    />
                </div>
                <div class="search-bar">
                    <i data-lucide="hash" color="#999" size="20"></i>
                    <input
                        type="password"
                        placeholder="Senha"
                        name="senha"
                    />
                </div>
                <button class="btn-login">Cadastrar</button>
            </form>
        </main>

        <main class="update-container" style="display: none;">
            <form class="login-container" action="/usuario/update" method="post">
                <div class="section-header">
                    <h1>Editar Conta</h1>
                </div>
                <% if (usuario) { %>
                <div class="search-bar">
                <i data-lucide="smile" color="#999" size="20"></i>
                <input
                    type="text"
                    placeholder="Nome de usuário"
                    name="nome"
                    value="<%= usuario.nome %>"
                    />
                </div>
                <div class="search-bar">
                    <i data-lucide="at-sign" color="#999" size="20"></i>
                    <input
                    type="text"
                    placeholder="Email"
                    name="email"
                    value="<%= usuario.email %>"
                    />
                </div>
                <% } %>
                <button type="submit" class="btn-login">Editar</button>
            </form>
            <a href="/usuario/remove">
                <button class="btn-login">Apagar Conta</button>
            </a>
        </main>

        <main class="orders-container" style="display: none;">
            <div class="section-header">
                <h3>Meus Pedidos</h3>
                <a href="#" class="filter-link">Filtrar</a>
            </div>

            <div class="order-card">
                <div class="card-top">
                    <div>
                        <div class="order-id">PED-2024-001</div>
                        <div class="order-date">15 Jan 2024</div>
                    </div>
                    <span class="badge delivered">Entregue</span>
                </div>

                <div class="card-products">
                    <div class="product-thumb">
                        <i data-lucide="armchair" size="18"></i>
                    </div>
                    <div class="product-thumb">
                        <i data-lucide="table-2" size="18"></i>
                    </div>
                </div>

                <div class="card-footer">
                    <span class="price">R$ 2.769</span>
                    <button class="btn-details">Ver detalhes</button>
                </div>
            </div>

            <div class="order-card">
                <div class="card-top">
                    <div>
                        <div class="order-id">PED-2024-002</div>
                        <div class="order-date">28 Jan 2024</div>
                    </div>
                    <span class="badge sent">Enviado</span>
                </div>

                <div class="card-products">
                    <div class="product-thumb">
                        <i data-lucide="lamp" size="18"></i>
                    </div>
                </div>

                <div class="card-footer">
                    <span class="price">R$ 1.450</span>
                    <button class="btn-details">Ver detalhes</button>
                </div>
            </div>
        </main>

        <script>
            lucide.createIcons();
        </script>
    </body>
</html>
